###
# wrappers for docker run commands.
# straight up from @jfrazelle's GH.
# any errors are my own.
## 

#
# delete stopped containers
# 

clean_untagged_images(){
  docker images | grep "<none>" | awk '{print $3}' | xargs docker rmi
}

delete_stopped(){
  local name=$1
  local state=$(docker inspect --format "{{.State.Running}}" $name 2>/dev/null)

  if [[ "$state" == "false" ]]; then
     docker rm $name
  fi
}

run-base-env(){
    delete_stopped dev-base
    docker run -it \
            -v ~/workspace:/home/user/workspace \
            -v ~/.vim:/home/user/.vim \
            --name dev-base \
            latrokles/dev-base:1.0
}

run-rust-env(){
    delete_stopped dev-rust
    docker run -it \
            -v ~/workspace:/home/user/workspace \
            -v ~/.vim:/home/user/.vim \
            --name dev-rust \
            latrokles/dev-rust
}
